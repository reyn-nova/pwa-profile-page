<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />

  <title>Reynald Prabha Nova | Frontend Engineer</title>

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">

  <meta property="og:image" content="https://pwa-profile-page.vercel.app/assets/images/profile-photo.jpg">

  <meta name="description" content="Welcome to my example PWA page" />
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="app profile">
    <header>
      <img src="/assets/images/profile-photo.jpg" alt="profile photo" class="profile-photo">
    </header>

    <main>
      <h1 id="profile-name">Reynald Prabha Nova</h1>
      <h2 id="profile-job">Front End Engineer</h2>

      <button id="notify-btn">Send Notification</button>
    </main>
  </div>

  <script>
    async function triggerNotification() {
      if (!('Notification' in window)) {
        alert('This browser does not support notifications.');
        return;
      }
  
      let permission = Notification.permission;
      if (permission === 'default') {
        permission = await Notification.requestPermission();
      }
  
      if (permission === 'granted') {
        const registration = await navigator.serviceWorker.getRegistration();
        if (registration) {
          registration.showNotification('Hello from your PWA!', {
            body: 'This is a push notification triggered by a button.',
            icon: '/icons/icon-192.png',
            vibrate: [100, 50, 100],
            tag: 'button-notification'
          });
        }
      } else {
        alert('Notification permission denied.');
      }
    }
  
    document.getElementById('notify-btn').addEventListener('click', triggerNotification);
  </script>
  
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log('SW registered', reg))
        .catch(err => console.warn('SW registration failed', err));
    }
  </script>
</body>
</html>